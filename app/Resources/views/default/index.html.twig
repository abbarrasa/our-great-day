{% extends 'base.html.twig' %}

{% block title %}Nuestro gran día ¦ Muy pronto{% endblock %}

{% block stylesheets %}
    <!--     Fonts     -->
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Grand+Hotel' rel='stylesheet' type='text/css'>

    {% stylesheets
    '../app/Resources/public/css/bootstrap.css'
    '../app/Resources/public/css/coming-sssoon.css' filter='cssrewrite' %}
    <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %}


{% block body %}
    <nav class="navbar navbar-transparent navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <a class="navbar-brand" href="{{ path('homepage') }}">Nuestro gran día</a>
                </ul>

                {# Social bar #}
                {{ knp_menu_render('social', {'template': 'partials/knp_menu.html.twig'}) }}

            </div><!-- /.navbar-collapse -->
        </div><!-- /.container -->
    </nav>

    {% image '../app/Resources/public/images/main2.jpg' output='/images/main2.jpg' %}
    <div class="main" style="background-image: url('{{ asset_url }}')">
        <!--    Change the image source '/images/default.jpg' with your favourite image.     -->
    {% endimage %}

        <div class="cover black" data-color="black"></div>

        <!--   You can change the black color for the filter with those colors: blue, green, red, orange       -->

        <div class="container">
            <h1 class="logo cursive">
                Muy pronto
            </h1>
            <!--  H1 can have 2 designs: "logo" and "logo cursive"           -->

            <div class="content">
                <h4 class="motto">Estamos trabajando para compartir nuestro gran día con vosotros</h4>
                <div class="subscribe">
                    <h5 class="info-text">
                        Únete a la lista de espera. Te avisamos cuando tengamos la web preparada.
                    </h5>

                    <div class="row">
                        <div class="col-md-4 col-md-offset-4 col-sm6-6 col-sm-offset-3 ">
                            {{ form_start(form, {'attr': {'class': 'form-inline', 'role': 'form'}}) }}
                            <div class="form-group{% if not form.email.vars.valid %} has-error{% endif %}">
                                {{ form_label(form.email, form.email, {'label_attr': {'class': 'sr-only'}}) }}
                                {{ form_widget(form.email, {'attr': {'placeholder': 'Your email here...', 'class': 'form-control transparent'}}) }}
                                {{ form_errors(form.email) }}
                            </div>
                            {{ form_widget(form.submit, {'attr': {'class': 'btn btn-danger btn-fill'}}) }}
                            {{ form_end(form) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="container">
                Made with <i class="fa fa-heart heart"></i> by <a href="https://github.com/abbarrasa/our-great-day">Alberto Buitrago</a> for a better web. Thanks to <a href="http://www.creative-tim.com">Creative Tim</a>.
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block javascripts %}
    {% javascripts
    '../app/Resources/public/js/jquery-1.10.2.js'
    '../app/Resources/public/js/bootstrap.min.js'
    '../app/Resources/public/js/bootstrap-notify.min.js' output='js/compiled/app.js' %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}

    <script type="text/javascript">
        function showNotification(title, message, alert, icon)
        {
            $.notify({
                icon: icon,
                title: title,
                message: message
            },{
                type: alert,
                placement: {
                    from: "top",
                    align: "center"
                },
                template: '<div data-notify="container" class="col-xs-11 col-sm-6 alert alert-{0}" role="alert">' +
                '<button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button>' +
                '<span data-notify="icon"></span> ' +
                '<span data-notify="title"><strong>{1}</strong></span> ' +
                '<span data-notify="message">{2}</span>' +
                '<div class="progress" data-notify="progressbar">' +
                '<div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
                '</div>' +
                '<a href="{3}" target="{4}" data-notify="url"></a>' +
                '</div>'
            });
        }

        $(document).ready(function()
        {
            $('[data-toggle="tooltip"]').tooltip();

            {% for flashMessages in app.flashes %}
                {% for flashMessage in flashMessages %}
                    showNotification('{{ flashMessage.title }}', '{{ flashMessage.message }}', '{{ flashMessage.alert }}', '{{ flashMessage.icon }}');
                {% endfor %}
            {% endfor %}

            {# Load enquiry form #}
            $('a.contact-us').click(function(e) {
                e.preventDefault();
                $.ajax({
                    url: '{{ path('enquiry') }}',
                    type: 'POST'
                }).done(function (responseJSON) {
                    $('#myModal').find('.modal-body').html(responseJSON.view);
                    $('#myModal').modal('show');
                });
            });

            {# Submit enquiry form #}
            $('body').on('submit', 'form[name="enquiry"]', function(e) {
                e.preventDefault();
                var $form = $(this);
                $.ajax({
                    type: $(this).attr('method'),
                    url: $(this).attr('action'),
                    data: $form.serialize(),
                    beforeSend: function() {
                        $('#myModal').modal('hide');
                    }
                }).done(function () {
                    $form[0].reset();
                    showNotification('Success!', 'Your request has been sent successfully.', 'success', 'fa fa-check-circle');
                }).fail(function (jqXHR, textStatus, errorThrown) {
                    if (jqXHR.responseJSON.hasOwnProperty('view')) {
                        $('#myModal').find('.modal-body').html(jqXHR.responseJSON.view);
                        $('#myModal').modal('show');
                    }
                });
            });
        });
    </script>
{% endblock %}
